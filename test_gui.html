<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Digital Twin Test GUI</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh; padding: 20px;
    }
    .container {
      max-width: 1200px; margin: 0 auto; background: white; border-radius: 20px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3); padding: 40px;
    }
    h1 { text-align: center; color: #333; margin-bottom: 10px; font-size: 2.5em; }
    .subtitle { text-align: center; color: #666; margin-bottom: 40px; }
    .config-section { background: #f8f9fa; padding: 20px; border-radius: 10px; margin-bottom: 30px; }
    .config-section h3 { margin-bottom: 15px; color: #333; }
    .config-input {
      width: 100%; padding: 10px; border: 2px solid #ddd; border-radius: 5px; font-size: 16px; margin-bottom: 10px;
    }
    .upload-grid {
      display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px; margin-bottom: 30px;
    }
    .upload-card {
      background: #f8f9fa; border-radius: 15px; padding: 20px; text-align: center;
      border: 3px dashed #ddd; transition: all 0.3s;
    }
    .upload-card:hover { border-color: #667eea; background: #f0f4ff; }
    .upload-card.has-image { border-color: #28a745; border-style: solid; }
    .upload-card.quality-bad { border-color: #dc3545; background: #ffe0e0; }
    .upload-label { font-weight: bold; margin-bottom: 15px; display: block; color: #333; font-size: 1.1em; }
    .upload-area {
      cursor: pointer; padding: 30px; background: white; border-radius: 10px; min-height: 250px;
      display: flex; flex-direction: column; align-items: center; justify-content: center;
    }
    .upload-icon { font-size: 60px; margin-bottom: 15px; opacity: 0.5; }
    .preview-image { max-width: 100%; max-height: 200px; border-radius: 10px; margin-bottom: 10px; }
    .quality-badge { display: inline-block; padding: 5px 15px; border-radius: 20px; font-size: 14px; font-weight: bold; margin-top: 10px; }
    .quality-good { background: #28a745; color: white; }
    .quality-bad { background: #dc3545; color: white; }
    .quality-issues { margin-top: 10px; padding: 10px; background: #fff3cd; border-radius: 5px; font-size: 13px; text-align: left; }
    .measurements { background: #f8f9fa; padding: 20px; border-radius: 10px; margin-bottom: 30px; }
    .measurement-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; }
    .measurement-item { display: flex; flex-direction: column; }
    .measurement-item label { font-weight: bold; margin-bottom: 5px; color: #333; }
    .measurement-item input { padding: 8px; border: 2px solid #ddd; border-radius: 5px; font-size: 16px; }
    .button-group { display: flex; gap: 15px; justify-content: center; margin-bottom: 30px; flex-wrap: wrap; }
    button {
      padding: 15px 40px; font-size: 18px; font-weight: bold; border: none; border-radius: 10px; cursor: pointer;
      transition: all 0.3s; display: flex; align-items: center; gap: 10px;
    }
    .btn-primary {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;
    }
    .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 10px 20px rgba(102, 126, 234, 0.4); }
    .btn-primary:disabled { background: #ccc; cursor: not-allowed; transform: none; }
    .btn-secondary { background: #6c757d; color: white; }
    .btn-secondary:hover { background: #5a6268; }
    .spinner {
      border: 3px solid #f3f3f3; border-top: 3px solid #667eea; border-radius: 50%;
      width: 20px; height: 20px; animation: spin 1s linear infinite;
    }
    @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    .result-section { background: #f8f9fa; padding: 20px; border-radius: 10px; margin-top: 30px; }
    .result-section h3 { margin-bottom: 15px; color: #333; }
    .result-content { background: white; padding: 20px; border-radius: 10px; max-height: 600px; overflow-y: auto; }
    .success-message { background: #d4edda; color: #155724; padding: 15px; border-radius: 10px; margin-bottom: 15px; border: 1px solid #c3e6cb; }
    .error-message { background: #f8d7da; color: #721c24; padding: 15px; border-radius: 10px; margin-bottom: 15px; border: 1px solid #f5c6cb; }
    .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; margin-top: 15px; }
    .stat-item { background: #e9ecef; padding: 15px; border-radius: 10px; text-align: center; }
    .stat-value { font-size: 24px; font-weight: bold; color: #667eea; }
    .stat-label { font-size: 12px; color: #666; margin-top: 5px; }
    input[type="file"] { display: none; }
    .instructions { background: #e7f3ff; padding: 20px; border-radius: 10px; margin-bottom: 30px; border-left: 4px solid #667eea; }
    .instructions h3 { margin-bottom: 10px; color: #333; }
    .instructions ul { margin-left: 20px; color: #555; }
    .instructions li { margin-bottom: 8px; }
    .footer { text-align: center; margin-top: 40px; padding-top: 20px; border-top: 2px solid #e9ecef; color: #666; }
    .footer a { color: #667eea; text-decoration: none; }
    .footer a:hover { text-decoration: underline; }
    
    /* Responsive design */
    @media (max-width: 768px) {
      .container { padding: 20px; }
      h1 { font-size: 2em; }
      .upload-grid { grid-template-columns: 1fr; }
      .measurement-grid { grid-template-columns: 1fr; }
      .button-group { flex-direction: column; }
      button { width: 100%; justify-content: center; }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üé≠ Digital Twin Generator</h1>
    <p class="subtitle">AI-Powered 3D Body Model Creation with MediaPipe Pose Detection</p>

    <div class="config-section">
      <h3>‚öôÔ∏è RunPod Configuration</h3>
      <input type="text" id="apiEndpoint" class="config-input"
             placeholder="RunPod API endpoint (e.g., https://api.runpod.ai/v2/YOUR_ENDPOINT_ID)" 
             value="">
      <input type="password" id="apiKey" class="config-input" 
             placeholder="RunPod API Key (starts with 'runpod_...')" 
             value="">
      <small style="color:#666;">
        üí° <strong>Tip:</strong> Enter the base URL without /run or /status. 
        The app will automatically call <code>/run</code> and poll <code>/status/{jobId}</code>.
        <br>
        üîó Get your credentials at <a href="https://runpod.io" target="_blank" style="color:#667eea;">runpod.io</a>
      </small>
    </div>

    <div class="instructions">
      <h3>üì∏ Photo Requirements</h3>
      <ul>
        <li><strong>3 Photos Required:</strong> Front view (0¬∞), Side view (90¬∞), Back view (180¬∞)</li>
        <li><strong>Distance:</strong> Stand 2-3 meters from camera</li>
        <li><strong>Lighting:</strong> Good, even lighting (avoid harsh shadows)</li>
        <li><strong>Clothing:</strong> Wear fitted clothing to show body shape</li>
        <li><strong>Background:</strong> Plain, solid color preferred (improves pose detection)</li>
        <li><strong>Camera:</strong> Hold steady to avoid blur (minimum 50 sharpness score)</li>
        <li><strong>Pose:</strong> Stand naturally with arms slightly away from body</li>
      </ul>
    </div>

    <div class="upload-grid">
      <div class="upload-card" id="card1">
        <span class="upload-label">üì∑ Front View (0¬∞)</span>
        <label for="photo1" class="upload-area" id="preview1">
          <div class="upload-icon">‚¨ÜÔ∏è</div>
          <div>Click to upload photo</div>
          <small style="color:#999;margin-top:10px;">Face camera directly</small>
        </label>
        <input type="file" id="photo1" accept="image/jpeg,image/png,image/jpg" />
      </div>

      <div class="upload-card" id="card2">
        <span class="upload-label">üì∑ Side View (90¬∞)</span>
        <label for="photo2" class="upload-area" id="preview2">
          <div class="upload-icon">‚¨ÜÔ∏è</div>
          <div>Click to upload photo</div>
          <small style="color:#999;margin-top:10px;">Turn 90¬∞ to your right</small>
        </label>
        <input type="file" id="photo2" accept="image/jpeg,image/png,image/jpg" />
      </div>

      <div class="upload-card" id="card3">
        <span class="upload-label">üì∑ Back View (180¬∞)</span>
        <label for="photo3" class="upload-area" id="preview3">
          <div class="upload-icon">‚¨ÜÔ∏è</div>
          <div>Click to upload photo</div>
          <small style="color:#999;margin-top:10px;">Face away from camera</small>
        </label>
        <input type="file" id="photo3" accept="image/jpeg,image/png,image/jpg" />
      </div>
    </div>

    <div class="measurements">
      <h3>üìè Body Measurements</h3>
      <p style="margin-bottom:15px;color:#666;">
        Enter your measurements for better accuracy. Default values are based on average adult proportions.
      </p>
      <div class="measurement-grid">
        <div class="measurement-item">
          <label>Height (cm)</label>
          <input type="number" id="height" value="170" min="140" max="210" step="1">
        </div>
        <div class="measurement-item">
          <label>Weight (kg)</label>
          <input type="number" id="weight" value="70" min="40" max="150" step="1">
        </div>
        <div class="measurement-item">
          <label>Shoulder Width (cm)</label>
          <input type="number" id="shoulder" value="40" min="30" max="60" step="1">
        </div>
        <div class="measurement-item">
          <label>Chest Circumference (cm)</label>
          <input type="number" id="chest" value="90" min="70" max="140" step="1">
        </div>
        <div class="measurement-item">
          <label>Waist Circumference (cm)</label>
          <input type="number" id="waist" value="80" min="60" max="130" step="1">
        </div>
        <div class="measurement-item">
          <label>Hip Circumference (cm)</label>
          <input type="number" id="hips" value="95" min="70" max="140" step="1">
        </div>
      </div>
    </div>

    <div class="button-group">
      <button class="btn-secondary" id="analyzeBtn">
        üîç Analyze Photo Quality
      </button>
      <button class="btn-primary" id="generateBtn" disabled>
        üéØ Generate Digital Twin
      </button>
    </div>

    <div class="result-section" id="resultSection" style="display:none;">
      <h3>üìä Results</h3>
      <div class="result-content" id="resultContent"></div>
    </div>

    <div class="footer">
      <p>
        <strong>Digital Twin Generator</strong> | 
        Powered by <a href="https://runpod.io" target="_blank">RunPod</a> | 
        Uses <a href="https://google.github.io/mediapipe/" target="_blank">MediaPipe</a> Pose Detection
      </p>
      <p style="margin-top:10px;font-size:12px;">
        üí° Open browser console (F12) to see detailed processing logs
      </p>
    </div>
  </div>

  <!-- Main application script -->
  <script src="app.js" defer></script>
</body>
</html>
